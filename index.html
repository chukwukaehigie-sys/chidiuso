<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Med Checker Companion</title>
  <link rel="stylesheet" href="simpmedcheck.css" />
  <style>
    .language-selector {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .translated-content {
      transition: all 0.3s ease;
    }

    .remove-btn {
      background: #e74c3c;
      color: white;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8em;
      margin-left: 10px;
    }
    
    .remove-btn:hover {
      background: #c0392b;
    }
  </style>
</head>
<body>
  <header>
    <nav class="utility-bar">
      <a href="index.html" style="text-decoration: none;"><button id="homeBtn">ğŸ  <span data-translate="home">Home</span></button></a>
      <a href="schedule.html" style="text-decoration: none;"><button id="scheduleBtn">ğŸ“… <span data-translate="schedule">Schedule</span></button></a>
      <a href="settings.html" style="text-decoration: none;"><button id="settingsBtn">âš™ï¸ <span data-translate="settings">Settings</span></button></a>
      <a href="howtouse.html" style="text-decoration: none;"><button>â“ <span data-translate="howToUse">How to Use</span></button></a>
      <a href="added-medications.html" style="text-decoration: none;"><button>ğŸ’Š <span data-translate="addedMeds">Added Medications</span></button></a>
      <a href="profile.html" style="text-decoration: none;"><button>ğŸ‘¤ <span data-translate="profile">Profile</span></button></a>

      <div class="language-selector">
        <select class="lS" id="languageSelect">
          <option value="en">English</option>
          <option value="ig">Igbo</option>
          <option value="yo">Yoruba</option>
          <option value="ha">Hausa</option>
        </select>
      </div>
    </nav>

    <h1>ğŸ‘µ <span data-translate="appName">MedMinder</span></h1>
    <!-- Personalized Greeting -->
<div id="personalGreeting" style="text-align: center; font-size: 1.8em; margin: 20px 0; padding: 15px; background: linear-gradient(135deg, #4CAF50, #45a049); color: white; border-radius: 10px;">
    Welcome to MedMinder!
</div>
    <p id="headerGreeting" data-translate="welcome">Welcome, Chidiuso!</p>
    <p id="headerTime"></p>
    <p id="dailyQuote"></p>
  </header>

  <main>
    <section style="font-size: 30px; height: auto;" id="homeSection" class="utility-section">
      <span data-translate="welcomeMessage">Welcome to MedMinder!</span>
    </section>

    <section class="med-list">
      <h2>ğŸ•’ <span data-translate="todaysMeds">Today's Medications</span></h2>
      <ul id="medications">
        <!-- Medications will be dynamically added here -->
      </ul>
    </section>

    <section class="add-med">
      <h2>â• <span data-translate="addNewMed">Add a New Medication</span></h2>
      <form id="medForm">
        <label for="Day" data-translate="dayLabel">Day</label>
        <input id="Day" type="text" placeholder="e.g. Monday" required />
        
        <label for="medName" data-translate="medNameLabel">Medication Name</label>
        <input id="medName" type="text" placeholder="e.g. Vitamin D" required />

        <label for="dosage" data-translate="dosageLabel">Dosage</label>
        <input id="dosage" type="text" placeholder="e.g. 500mg" required />

        <label for="time" data-translate="timeLabel">Time to Take</label>
        <input id="time" type="time" required />

        <button type="submit" data-translate="addMedButton">Add Medication</button>
      </form>
    </section>
  </main>

  <footer>
    <p><span data-translate="copyright">MedMinder Â© 2025</span></p>
    <p><span data-translate="designedFor">Designed with care for older adults</span> | <a href="#" data-translate="privacyPolicy">Privacy Policy</a></p>
  </footer>

  <script>
    // Comprehensive translations for all content - SINGLE DEFINITION
    const translations = {
      en: {
        home: "Home", schedule: "Schedule", reminders: "Reminders", settings: "Settings",
        howToUse: "How to Use", addedMeds: "Added Medications", profile: "Profile",
        appName: "MedMinder", welcome: "Welcome, Chidiuso!", welcomeMessage: "Welcome to MedMinder!",
        todaysMeds: "Today's Medications", addNewMed: "Add a New Medication", dayLabel: "Day",
        medNameLabel: "Medication Name", dosageLabel: "Dosage", timeLabel: "Time to Take",
        addMedButton: "Add Medication", copyright: "MedMinder Â© 2025",
        designedFor: "Designed with care for older adults", privacyPolicy: "Privacy Policy",
        dayPlaceholder: "e.g. Monday", medNamePlaceholder: "e.g. Vitamin D", dosagePlaceholder: "e.g. 500mg",
        medicationAdded: "Medication Added", reminderAlert: "â° Reminder: Take {name} ({dose}) in 30 minutes",
        goodMorning: "Good morning", goodAfternoon: "Good afternoon", goodEvening: "Good evening",
        quotes: [
          "Your health is your wealth ğŸ’™", "Every dose is a step toward strength.",
          "You're doing great â€” keep going!", "Small steps, big impact. Take your meds!",
          "The body knows how to heal â€” we just need to listen."
        ]
      },
      ig: {
        home: "á»¤lá»", schedule: "Nhazi oge", reminders: "Ncheta", settings: "Ntá»ala",
        howToUse: "Otu esi eji", addedMeds: "á»Œgwá»¥ Agbakwunyere", profile: "Profaá»‹lá»¥",
        appName: "MedMinder", welcome: "Nná»á», Chidiuso!", welcomeMessage: "Nná»á» na MedMinder!",
        todaysMeds: "á»Œgwá»¥ Taa", addNewMed: "Tinye á»Œgwá»¥ á»Œhá»¥rá»¥", dayLabel: "á»¤bá»chá»‹",
        medNameLabel: "Aha á»Œgwá»¥", dosageLabel: "Usoro", timeLabel: "Oge Iwere",
        addMedButton: "Tinye á»Œgwá»¥", copyright: "MedMinder Â© 2025",
        designedFor: "Emebere ya maka ndá»‹ okenye", privacyPolicy: "Amá»¥ma Nzuzo",
        dayPlaceholder: "dá»‹ka Má»nde", medNamePlaceholder: "dá»‹ka Vitamin D", dosagePlaceholder: "dá»‹ka 500mg",
        medicationAdded: "Agbakwunyere á»Œgwá»¥", reminderAlert: "â° Ncheta: Were {name} ({dose}) n'ime nkeji iri atá»",
        goodMorning: "Utá»¥tá»¥ á»ma", goodAfternoon: "Ehihie á»ma", goodEvening: "Anyasá»‹ á»ma",
        quotes: [
          "Ahá»¥ ike gá»‹ bá»¥ aká»¥ na á»¥ba gá»‹ ğŸ’™", "á»Œgwá»¥ á» bá»¥la bá»¥ nzá»á»¥kwá»¥ n'ihu ike.",
          "á»Š na-eme nke á»ma â€” gaa n'ihu!", "Nzá»á»¥kwá»¥ ndá»‹ dá»‹ nta, mmetá»¥ta dá»‹ ukwuu. Were á»gwá»¥ gá»‹!",
          "Ahá»¥ maara otu esi agwá» á»rá»‹a â€” anyá»‹ kwesá»‹rá»‹ ige ntá»‹."
        ]
      },
      yo: {
        home: "Ile", schedule: "Iá¹£eto Akoko", reminders: "Awá»n iranti", settings: "Eto",
        howToUse: "Bii Lati Lo", addedMeds: "Awá»n Oogun Ti A Fikun", profile: "Profaili",
        appName: "MedMinder", welcome: "Kaabo, Chidiuso!", welcomeMessage: "Kaabo si MedMinder!",
        todaysMeds: "Awá»n Oogun Loni", addNewMed: "Fi Oogun Tuntun Kun", dayLabel: "á»Œjá»",
        medNameLabel: "Oruká» Oogun", dosageLabel: "Iwon Oogun", timeLabel: "Akoko Lati Mu",
        addMedButton: "Fi Oogun Kun", copyright: "MedMinder Â© 2025",
        designedFor: "A á¹£e apáº¹ráº¹ páº¹lu itoju fun awá»n ará»gbá»", privacyPolicy: "Ilana Iká»ká»",
        dayPlaceholder: "bii Monday", medNamePlaceholder: "bii Vitamin D", dosagePlaceholder: "bii 500mg",
        medicationAdded: "Oogun Ti A Fikun", reminderAlert: "â° Iranti: Mu {name} ({dose}) ninu iá¹£áº¹ju aadá»ta",
        goodMorning: "E kaaro", goodAfternoon: "E kasan", goodEvening: "E ku irole",
        quotes: [
          "Ilera ráº¹ ni dukia ráº¹ ğŸ’™", "Gbigbe oogun ká»á»kan jáº¹ igbesáº¹ si alagbara.",
          "O n á¹£e daradara â€” táº¹siwaju!", "Awá»n igbesáº¹ kekere, ipa nla. Mu awá»n oogun ráº¹!",
          "Ara má» bi a á¹£e le wosan â€” a kan nilo lati feti si."
        ]
      },
      ha: {
        home: "Gida", schedule: "Jadawali", reminders: "Tunatarwa", settings: "Saituna",
        howToUse: "Yadda ake Amfani", addedMeds: "Magungunan Da Aka Æ˜ara", profile: "Bayanan Martaba",
        appName: "MedMinder", welcome: "Barka da zuwa, Chidiuso!", welcomeMessage: "Barka da zuwa MedMinder!",
        todaysMeds: "Magungunan Yau", addNewMed: "Æ˜ara Sabon Magani", dayLabel: "Rana",
        medNameLabel: "Sunan Magani", dosageLabel: "Dozi", timeLabel: "Lokacin Shan",
        addMedButton: "Æ˜ara Magani", copyright: "MedMinder Â© 2025",
        designedFor: "An tsara shi da kulawa ga tsofaffi", privacyPolicy: "Manufar Sirri",
        dayPlaceholder: "misali Litinin", medNamePlaceholder: "misali Vitamin D", dosagePlaceholder: "misali 500mg",
        medicationAdded: "An Æ˜ara Magani", reminderAlert: "â° Tunatarwa: Sha {name} ({dose}) cikin mintuna talatin",
        goodMorning: "Barka da safiya", goodAfternoon: "Barka da rana", goodEvening: "Barka da yamma",
        quotes: [
          "Lafiyar ku ce dukiyar ku ğŸ’™", "Kowane dozi mataki ne zuwa ga Æ™arfi.",
          "Kuna yin kyau â€” ci gaba!", "Æ˜ananan matakai, babban tasiri. Sha magungunan ku!",
          "Jiki ya san yadda ake warkarwa â€” kawai muna buÆ™atar sauraro."
        ]
      }
    };

    // Apply translations to the entire page
    function applyTranslation(lang) {
      const t = translations[lang] || translations["en"];
      
      document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (t[key]) element.textContent = t[key];
      });
      
      // Update form placeholders
      const dayInput = document.getElementById('Day');
      const medNameInput = document.getElementById('medName');
      const dosageInput = document.getElementById('dosage');
      
      if (dayInput && t.dayPlaceholder) dayInput.placeholder = t.dayPlaceholder;
      if (medNameInput && t.medNamePlaceholder) medNameInput.placeholder = t.medNamePlaceholder;
      if (dosageInput && t.dosagePlaceholder) dosageInput.placeholder = t.dosagePlaceholder;
      
      updateHeader(lang);
      updateDailyQuote(lang);
    }

    // Time-based greeting function with translation
    function getGreeting(lang) {
      const hour = new Date().getHours();
      const t = translations[lang] || translations["en"];
      if (hour < 12) return t.goodMorning;
      if (hour < 18) return t.goodAfternoon;
      return t.goodEvening;
    }

    function updateHeader(lang = 'en') {
      const greeting = getGreeting(lang);
      document.getElementById("headerGreeting").textContent = `${greeting}, Chidiuso!`;
      document.getElementById("headerTime").textContent = new Date().toLocaleString();
    }

    function updateDailyQuote(lang = 'en') {
      const t = translations[lang] || translations["en"];
      const quotes = t.quotes || translations["en"].quotes;
      const quote = quotes[Math.floor(Math.random() * quotes.length)];
      document.getElementById("dailyQuote").textContent = quote;
    }

    // Load medications from localStorage on page load
    function loadMedications() {
      const medicationsList = document.getElementById('medications');
      medicationsList.innerHTML = '';
      
      const userMedications = JSON.parse(localStorage.getItem('userMedications') || '[]');
      
      userMedications.forEach(med => {
        const listItem = document.createElement('li');
        listItem.innerHTML = `
          <strong>${med.name}</strong> â€“ ${med.dose} at <em>${med.time}</em>
          <button class="remove-btn" onclick="removeMedication('${med.name}', '${med.dose}', '${med.time}', '${med.day}')">
            âœ• Remove
          </button>
        `;
        medicationsList.appendChild(listItem);
      });
    }

    // Remove medication function
    function removeMedication(name, dose, time, day) {
      if (confirm(`Remove ${name} (${dose}) from ${day} at ${time}?`)) {
        const userMedications = JSON.parse(localStorage.getItem('userMedications') || '[]');
        const updatedMeds = userMedications.filter(med => 
          !(med.name === name && med.dose === dose && med.time === time && med.day === day)
        );
        localStorage.setItem('userMedications', JSON.stringify(updatedMeds));
        loadMedications(); // Refresh the display
      }
    }

    // Enhanced duplicate checking - checks localStorage
    function isDuplicateMedication(name, dose, time, day) {
      const userMedications = JSON.parse(localStorage.getItem('userMedications') || '[]');
      return userMedications.some(med => 
        med.name.toLowerCase() === name.toLowerCase() && 
        med.dose.toLowerCase() === dose.toLowerCase() && 
        med.time === time &&
        med.day === day
      );
    }

    // Medication form handling - FIXED with localStorage integration
    document.getElementById("medForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const day = document.getElementById("Day").value.trim();
      const name = document.getElementById("medName").value.trim();
      const dose = document.getElementById("dosage").value.trim();
      const time = document.getElementById("time").value;

      // VALIDATION: Check for empty fields
      if (!day || !name || !dose || !time) {
        alert("âŒ Please fill all fields");
        return;
      }

      // VALIDATION: Check for duplicates in localStorage
      if (isDuplicateMedication(name, dose, time, day)) {
        alert("âŒ This medication is already in your list!");
        return;
      }

      // Save to localStorage
      const userMedications = JSON.parse(localStorage.getItem('userMedications') || '[]');
      userMedications.push({ name, dose, time, day });
      localStorage.setItem('userMedications', JSON.stringify(userMedications));

      // Refresh display
      loadMedications();
      this.reset();
    });

    // Initialize the page
    window.addEventListener("DOMContentLoaded", () => {
      const defaultLang = document.getElementById("languageSelect").value;
      applyTranslation(defaultLang);
      loadMedications(); // Load existing medications
      
      setInterval(() => {
        const currentLang = document.getElementById("languageSelect").value;
        updateHeader(currentLang);
      }, 1800000);
    });

    // Language selector event listener
    document.getElementById("languageSelect").addEventListener("change", (e) => {
      applyTranslation(e.target.value);
    });
  </script>
</body>
</html>


