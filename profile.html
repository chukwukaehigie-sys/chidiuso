<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MedMinder - Profile</title>
  <link rel="stylesheet" href="simpmedcheck.css" />
  <style>
    /* Profile-specific styles that match your existing design */
    .profile-container {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
    }

    .profile-header {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .profile-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background-color: #4a90e2;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      color: white;
      margin-right: 20px;
    }

    .profile-info h2 {
      margin: 0 0 5px 0;
      color: #333;
    }

    .profile-info p {
      margin: 0;
      color: #666;
    }

    .profile-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }

    .detail-card {
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .detail-card h3 {
      margin-top: 0;
      color: #4a90e2;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }

    .detail-item {
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
    }

    .detail-label {
      font-weight: bold;
      color: #555;
    }

    .detail-value {
      color: #333;
    }

    .emergency-contacts {
      margin-bottom: 30px;
    }

    .contact-item {
      display: flex;
      align-items: center;
      padding: 15px;
      background-color: white;
      margin-bottom: 10px;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      justify-content: space-between;
    }

    .contact-left {
      display: flex;
      align-items: center;
      flex-grow: 1;
    }

    .contact-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: #e74c3c;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      margin-right: 15px;
      font-size: 18px;
    }

    .contact-info {
      flex-grow: 1;
    }

    .contact-name {
      font-weight: bold;
      margin-bottom: 5px;
    }

    .contact-relationship {
      color: #666;
      font-size: 0.9em;
    }

    .contact-phone {
      color: #4a90e2;
    }

    .contact-actions {
      display: flex;
      gap: 10px;
    }

    .contact-btn {
      padding: 12px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .remove-contact-btn {
      background-color: #e74c3c;
      color: white;
      min-width: 120px;
    }

    .remove-contact-btn:hover {
      background-color: #c0392b;
      transform: translateY(-2px);
    }

    .profile-actions {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    .action-btn {
      padding: 15px 30px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
      font-size: 18px;
    }

    .edit-btn {
      background-color: #4a90e2;
      color: white;
    }

    .edit-btn:hover {
      background-color: #3a7bc8;
    }

    .logout-btn {
      background-color: #e74c3c;
      color: white;
    }

    .logout-btn:hover {
      background-color: #c0392b;
    }

    .add-contact-btn {
      background-color: #27ae60;
      color: white;
      border: none;
      padding: 15px 25px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      margin-bottom: 15px;
      font-size: 18px;
      min-width: 200px;
      transition: all 0.3s ease;
    }

    .add-contact-btn:hover {
      background-color: #219a52;
      transform: translateY(-2px);
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      margin: 0;
      color: #333;
      font-size: 24px;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 28px;
      cursor: pointer;
      color: #666;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #555;
      font-weight: bold;
      font-size: 16px;
    }

    .form-group input, .form-group select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
    }

    .save-btn {
      background-color: #4a90e2;
      color: white;
      border: none;
      padding: 15px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      width: 100%;
      margin-top: 10px;
      font-size: 18px;
      transition: background-color 0.3s;
    }

    .save-btn:hover {
      background-color: #3a7bc8;
    }

    @media (max-width: 768px) {
      .profile-details {
        grid-template-columns: 1fr;
      }
      
      .profile-header {
        flex-direction: column;
        text-align: center;
      }
      
      .profile-avatar {
        margin-right: 0;
        margin-bottom: 15px;
      }
      
      .contact-item {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .contact-actions {
        margin-top: 15px;
        width: 100%;
        justify-content: center;
      }
      
      .contact-btn {
        width: 100%;
        padding: 15px;
      }
      
      .add-contact-btn {
        width: 100%;
        min-width: auto;
      }
      
      .profile-actions {
        flex-direction: column;
      }
      
      .action-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <nav class="utility-bar">
      <a href="index.html" style="text-decoration: none;"><button>üè† Home</button></a>
      <a href="schedule.html" style="text-decoration: none;"><button>üìÖ Schedule</button></a>
      <a href="settings.html" style="text-decoration: none;"><button>‚öôÔ∏è Settings</button></a>
      <a href="howtouse.html" style="text-decoration: none;"><button>‚ùì How to Use</button></a>
      <a href="added-medications.html" style="text-decoration: none;"><button>üíä Added Medications</button></a>
      <a href="profile.html" style="text-decoration: none;"><button>üë§ Profile</button></a>

      <select class="lS" id="languageSelect">
        <option value="en">English</option>
        <option value="ig">Igbo</option>
        <option value="yo">Yoruba</option>
        <option value="ha">Hausa</option>
      </select>
    </nav>

    <h1>üëµ MedMinder</h1>
    <p id="headerGreeting">Welcome, Chidiuso!</p>
    <p id="headerTime"></p>
    <p id="dailyQuote"></p>
  </header>

  <main>
    <div class="profile-container">
      <div class="profile-details">
        <div class="detail-card">
          <h3>Personal Information</h3>
          <div class="detail-item">
            <span class="detail-label">Full Name:</span>
            <span class="detail-value" id="profileFullName">Chidiuso</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Date of Birth:</span>
            <span class="detail-value" id="profileDOB">January 15, 1955</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Gender:</span>
            <span class="detail-value" id="profileGender">Female</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Phone:</span>
            <span class="detail-value" id="profilePhone">+234-801-234-5678</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Email:</span>
            <span class="detail-value" id="profileEmail">chidiuso@example.com</span>
          </div>
        </div>
        
        <div class="detail-card">
          <h3>Health Information</h3>
          <div class="detail-item">
            <span class="detail-label">Primary Doctor:</span>
            <span class="detail-value" id="profileDoctor">Dr. Adebayo</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Doctor's Phone:</span>
            <span class="detail-value" id="profileDoctorPhone">+234-802-345-6789</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Pharmacy/Hospital:</span>
            <span class="detail-value" id="profilePharmacy">MedPlus Pharmacy</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Allergies:</span>
            <span class="detail-value" id="profileAllergies">Penicillin, Sulfa drugs</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Blood Type:</span>
            <span class="detail-value" id="profileBloodType">O+</span>
          </div>
        </div>
      </div>
      
      <div class="emergency-contacts">
        <!-- Add these data-translate attributes to your HTML -->
        <h3 data-translate="personalInfo">Personal Information</h3>
        <span class="detail-label" data-translate="fullName">Full Name:</span>
        <button class="add-contact-btn" id="addContactBtn" data-translate="addEmergencyContact">+ Add Emergency Contact</button>
<!-- Add similar data-translate attributes to all translatable text -->
        <div id="emergencyContactsList">
          <!-- Contacts will be loaded here dynamically -->
        </div>
      </div>
      
      <div class="profile-actions">
        <button class="action-btn edit-btn" id="editProfileBtn">Edit Profile</button>
        <button class="action-btn logout-btn" id="logoutBtn">Log Out</button>
      </div>
    </div>
    
    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Edit Profile</h3>
          <button class="close-btn" id="closeModalBtn">&times;</button>
        </div>
        <form id="editProfileForm">
          <div class="form-group">
            <label for="editFullName">Full Name</label>
            <input type="text" id="editFullName" required>
          </div>
          <div class="form-group">
            <label for="editDOB">Date of Birth</label>
            <input type="text" id="editDOB" required>
          </div>
          <div class="form-group">
            <label for="editGender">Gender</label>
            <select id="editGender" required>
              <option value="Female">Female</option>
              <option value="Male">Male</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="editPhone">Phone</label>
            <input type="tel" id="editPhone" required>
          </div>
          <div class="form-group">
            <label for="editEmail">Email</label>
            <input type="email" id="editEmail">
          </div>
          <div class="form-group">
            <label for="editDoctor">Primary Doctor</label>
            <input type="text" id="editDoctor">
          </div>
          <div class="form-group">
            <label for="editDoctorPhone">Doctor's Phone</label>
            <input type="tel" id="editDoctorPhone">
          </div>
          <div class="form-group">
            <label for="editPharmacy">Pharmacy</label>
            <input type="text" id="editPharmacy">
          </div>
          <div class="form-group">
            <label for="editAllergies">Allergies</label>
            <input type="text" id="editAllergies">
          </div>
          <div class="form-group">
            <label for="editBloodType">Blood Type</label>
            <input type="text" id="editBloodType">
          </div>
          <button type="submit" class="save-btn">Save Changes</button>
        </form>
      </div>
    </div>

    <!-- Add Contact Modal -->
    <div class="modal" id="addContactModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Add Emergency Contact</h3>
          <button class="close-btn" id="closeContactModalBtn">&times;</button>
        </div>
        <form id="addContactForm">
          <div class="form-group">
            <label for="contactName">Full Name</label>
            <input type="text" id="contactName" required>
          </div>
          <div class="form-group">
            <label for="contactRelationship">Relationship</label>
            <input type="text" id="contactRelationship" required>
          </div>
          <div class="form-group">
            <label for="contactPhone">Phone Number</label>
            <input type="tel" id="contactPhone" required>
          </div>
          <button type="submit" class="save-btn">Add Contact</button>
        </form>
      </div>
    </div>
  </main>

<footer>
  <p><span data-translate="copyright">MedMinder ¬© 2025</span></p>
  <p>
    <span data-translate="designedFor">Designed with care for older adults</span> | 
    <a href="#" data-translate="privacyPolicy">Privacy Policy</a>
  </p>
</footer>

  <script>
// Language translations
const translations = {
  en: {
    // Navigation
    home: "Home",
    schedule: "Schedule", 
    settings: "Settings",
    howToUse: "How to Use",
    addedMeds: "Added Medications",
    profile: "Profile",
    
    // Profile Sections
    personalInfo: "Personal Information",
    healthInfo: "Health Information",
    emergencyContacts: "Emergency Contacts",
    
    // Personal Information Labels
    fullName: "Full Name",
    dateOfBirth: "Date of Birth", 
    gender: "Gender",
    phone: "Phone",
    email: "Email",
    
    // Health Information Labels
    primaryDoctor: "Primary Doctor",
    doctorPhone: "Doctor's Phone",
    pharmacy: "Pharmacy", 
    allergies: "Allergies",
    bloodType: "Blood Type",
    
    // Buttons and Actions
    addEmergencyContact: "Add Emergency Contact",
    editProfile: "Edit Profile", 
    logout: "Log Out",
    remove: "Remove",
    saveChanges: "Save Changes",
    
    // Modal Titles
    editProfileTitle: "Edit Profile",
    addContactTitle: "Add Emergency Contact",
    
    // Form Labels
    contactName: "Full Name",
    contactRelationship: "Relationship", 
    contactPhone: "Phone Number",
    
    // Messages
    noContacts: "No emergency contacts added yet.",
    removeContactConfirm: "Remove {name} from emergency contacts?",
    contactRemoved: "{name} has been removed from your emergency contacts.",
    contactAdded: "{name} has been added to your emergency contacts!",
    profileUpdated: "Profile updated successfully!",
    logoutConfirm: "Are you sure you want to log out?",
    loggedOut: "You have been logged out.",
    
    // Header
    welcome: "Welcome, {name}! Let's stay on track with your health today.",
    goodMorning: "Good morning",
    goodAfternoon: "Good afternoon", 
    goodEvening: "Good evening",
    
    // Footer
    copyright: "MedMinder ¬© 2025",
    designedFor: "Designed with care for older adults",
    privacyPolicy: "Privacy Policy"
  },
  ig: {
    // Navigation
    home: "·ª§l·ªç",
    schedule: "Nhazi oge",
    settings: "Nt·ªçala", 
    howToUse: "Otu esi eji",
    addedMeds: "·ªågw·ª• Agbakwunyere",
    profile: "Profa·ªãl·ª•",
    
    // Profile Sections
    personalInfo: "Ozi Onwe",
    healthInfo: "Ozi Ah·ª•ike",
    emergencyContacts: "K·ªçntakt·ªã Mberede",
    
    // Personal Information Labels
    fullName: "Aha Zuruezu",
    dateOfBirth: "·ª§b·ªçch·ªã ·ªåm·ª•m·ª•",
    gender: "Okike", 
    phone: "Ekwent·ªã",
    email: "Email",
    
    // Health Information Labels
    primaryDoctor: "D·ªçk·ªãta Mb·ª•",
    doctorPhone: "Ekwent·ªã D·ªçk·ªãta",
    pharmacy: "·ª§l·ªç Ah·ªãa ·ªågw·ª•",
    allergies: "Ihe Nf·ª•kas·ªã Ah·ª•",
    bloodType: "·ª§d·ªã ·ªåbara",
    
    // Buttons and Actions
    addEmergencyContact: "Tinye K·ªçntakt·ªã Mberede",
    editProfile: "Dezie Profa·ªãl·ª•",
    logout: "P·ª•·ªç", 
    remove: "Wepu",
    saveChanges: "Chekwa Mgbanwe",
    
    // Modal Titles
    editProfileTitle: "Dezie Profa·ªãl·ª•",
    addContactTitle: "Tinye K·ªçntakt·ªã Mberede",
    
    // Form Labels
    contactName: "Aha Zuruezu",
    contactRelationship: "Mmek·ªçr·ªãta",
    contactPhone: "N·ªçmba Ekwent·ªã",
    
    // Messages
    noContacts: "Enwegh·ªã k·ªçntakt·ªã mberede agbakwunyere.",
    removeContactConfirm: "Wepu {name} na k·ªçntakt·ªã mberede g·ªã?",
    contactRemoved: "Ewep·ª•la {name} na k·ªçntakt·ªã mberede g·ªã.",
    contactAdded: "Agbakwunyela {name} na k·ªçntakt·ªã mberede g·ªã!",
    profileUpdated: "Emechara melite profa·ªãl·ª• g·ªã nke ·ªçma!",
    logoutConfirm: "·ªä ji n'aka na ·ªã ch·ªçr·ªç ·ªãp·ª•?",
    loggedOut: "·ªä p·ª•·ªçla.",
    
    // Header
    welcome: "Nn·ªç·ªç, {name}! Ka any·ªã n·ªçr·ªç na egwu ah·ª•ike g·ªã taa.",
    goodMorning: "Ut·ª•t·ª• ·ªçma",
    goodAfternoon: "Ehihie ·ªçma",
    goodEvening: "Anyas·ªã ·ªçma",
    
    // Footer
    copyright: "MedMinder ¬© 2025",
    designedFor: "Emebere ya maka nd·ªã okenye",
    privacyPolicy: "Am·ª•ma Nzuzo"
  },
  yo: {
    // Navigation
    home: "Ile",
    schedule: "I·π£eto Akoko", 
    settings: "Eto",
    howToUse: "Bii Lati Lo",
    addedMeds: "Aw·ªçn Oogun Ti A Fikun",
    profile: "Profaili",
    
    // Profile Sections
    personalInfo: "Alaye Ara ·∫∏ni",
    healthInfo: "Alaye Ilera",
    emergencyContacts: "Aw·ªçn Olubas·ªçr·ªç I·π£·∫πju Aye",
    
    // Personal Information Labels
    fullName: "Oruk·ªç Gbogbo",
    dateOfBirth: "·ªåj·ªç Ibi",
    gender: "Ibi·π£·∫π",
    phone: "Foonu",
    email: "Imeeli",
    
    // Health Information Labels
    primaryDoctor: "D·ªçkita Ak·ªçk·ªç",
    doctorPhone: "Foonu D·ªçkita",
    pharmacy: "Ile Itaja Oogun",
    allergies: "Aw·ªçn Ail·∫πgb·∫π",
    bloodType: "Iru ·∫∏j·∫π",
    
    // Buttons and Actions
    addEmergencyContact: "Fi Olubas·ªçr·ªç I·π£·∫πju Aye Kun",
    editProfile: "·π¢atunk·ªç Profaili",
    logout: "Jade",
    remove: "Y·ªç Kuro",
    saveChanges: "Fi Aw·ªçn Ayipada Pam·ªç",
    
    // Modal Titles
    editProfileTitle: "·π¢atunk·ªç Profaili",
    addContactTitle: "Fi Olubas·ªçr·ªç I·π£·∫πju Aye Kun",
    
    // Form Labels
    contactName: "Oruk·ªç Gbogbo",
    contactRelationship: "Ibatan",
    contactPhone: "N·ªçmba Foonu",
    
    // Messages
    noContacts: "Ko si aw·ªçn olubas·ªçr·ªç i·π£·∫πju aye ti a fikun sib·∫π.",
    removeContactConfirm: "Y·ªç {name} kuro ninu aw·ªçn olubas·ªçr·ªç i·π£·∫πju aye r·∫π?",
    contactRemoved: "Ti y·ªç {name} kuro ninu aw·ªçn olubas·ªçr·ªç i·π£·∫πju aye r·∫π.",
    contactAdded: "Ti fi {name} kun si aw·ªçn olubas·ªçr·ªç i·π£·∫πju aye r·∫π!",
    profileUpdated: "Profaili ti ni imudojuiw·ªçn ni a·π£ey·ªçri!",
    logoutConfirm: "·π¢e o da ·ªç loju pe o f·∫π lati jade?",
    loggedOut: "O ti jade.",
    
    // Header
    welcome: "Kaabo, {name}! J·∫π ki a duro lori ilana ilera r·∫π loni.",
    goodMorning: "E kaaro",
    goodAfternoon: "E kasan",
    goodEvening: "E ku irole",
    
    // Footer
    copyright: "MedMinder ¬© 2025",
    designedFor: "A ·π£e ap·∫πr·∫π p·∫πlu itoju fun aw·ªçn ar·ªçgb·ªç",
    privacyPolicy: "Ilana Ik·ªçk·ªç"
  },
  ha: {
    // Navigation
    home: "Gida",
    schedule: "Jadawali",
    settings: "Saituna",
    howToUse: "Yadda ake Amfani", 
    addedMeds: "Magungunan Da Aka ∆òara",
    profile: "Bayanan Martaba",
    
    // Profile Sections
    personalInfo: "Bayanin Sirri",
    healthInfo: "Bayanin Lafiya", 
    emergencyContacts: "Lambobin Gaggawa",
    
    // Personal Information Labels
    fullName: "Cikakken Suna",
    dateOfBirth: "Ranar Haihuwa",
    gender: "Jinsi",
    phone: "Wayar",
    email: "Imel",
    
    // Health Information Labels
    primaryDoctor: "Likitoci Na Farko",
    doctorPhone: "Lambar Wayar Likita",
    pharmacy: "Kantin Magunguna",
    allergies: "Rashin Lafiyar Jiki",
    bloodType: "Nau'in Jini",
    
    // Buttons and Actions
    addEmergencyContact: "∆òara Lambobin Gaggawa",
    editProfile: "Gyara Bayanan Martaba",
    logout: "Fita",
    remove: "Cire",
    saveChanges: "Ajiye Canje-canjen",
    
    // Modal Titles
    editProfileTitle: "Gyara Bayanan Martaba",
    addContactTitle: "∆òara Lambobin Gaggawa",
    
    // Form Labels
    contactName: "Cikakken Suna",
    contactRelationship: "Dangantaka",
    contactPhone: "Lambar Wayar",
    
    // Messages
    noContacts: "Babu lambobin gaggawa da aka ∆ôara tukuna.",
    removeContactConfirm: "Cire {name} daga lambobin gaggawa?",
    contactRemoved: "An cire {name} daga lambobin gaggawa.",
    contactAdded: "An ∆ôara {name} zuwa lambobin gaggawa!",
    profileUpdated: "An sabunta bayanan martaba cikin nasara!",
    logoutConfirm: "Shin kuna da tabbacin kuna son fita?",
    loggedOut: "Kun fita.",
    
    // Header
    welcome: "Barka da zuwa, {name}! Bari mu ci gaba da bin tsarin lafiyar ku a yau.",
    goodMorning: "Barka da safiya",
    goodAfternoon: "Barka da rana",
    goodEvening: "Barka da yamma",
    
    // Footer
    copyright: "MedMinder ¬© 2025",
    designedFor: "An tsara shi da kulawa ga tsofaffi",
    privacyPolicy: "Manufar Sirri"
  }
};

// Helper function to get greeting based on time
function getGreeting(lang) {
  const hour = new Date().getHours();
  const t = translations[lang] || translations["en"];
  if (hour < 12) return t.goodMorning;
  if (hour < 18) return t.goodAfternoon;
  return t.goodEvening;
}

function applyTranslation(lang) {
  const t = translations[lang] || translations["en"];
  
  // Update all elements with data-translate attribute
  document.querySelectorAll('[data-translate]').forEach(element => {
    const key = element.getAttribute('data-translate');
    if (t[key]) element.textContent = t[key];
  });
  
  // Update header greeting
  const userName = document.getElementById('profileFullName').textContent;
  const greeting = getGreeting(lang);
  document.getElementById("headerGreeting").textContent = t.welcome.replace('{name}', userName);
  
  // Update buttons and dynamic content
  const elementsToUpdate = {
    'addContactBtn': t.addEmergencyContact,
    'editProfileBtn': t.editProfile,
    'logoutBtn': t.logout
  };
  
  Object.entries(elementsToUpdate).forEach(([id, text]) => {
    const el = document.getElementById(id);
    if (el) el.textContent = text;
  });
  
  // Update modal titles
  const editModalTitle = document.querySelector('#editProfileModal .modal-title');
  const addContactModalTitle = document.querySelector('#addContactModal .modal-title');
  if (editModalTitle) editModalTitle.textContent = t.editProfileTitle;
  if (addContactModalTitle) addContactModalTitle.textContent = t.addContactTitle;
  
  // Update form labels
  const formLabels = {
    'editFullName': t.fullName,
    'editDOB': t.dateOfBirth,
    'editGender': t.gender,
    'editPhone': t.phone,
    'editEmail': t.email,
    'editDoctor': t.primaryDoctor,
    'editDoctorPhone': t.doctorPhone,
    'editPharmacy': t.pharmacy,
    'editAllergies': t.allergies,
    'editBloodType': t.bloodType,
    'contactName': t.contactName,
    'contactRelationship': t.contactRelationship,
    'contactPhone': t.contactPhone
  };
  
  Object.entries(formLabels).forEach(([id, text]) => {
    const label = document.querySelector(`label[for="${id}"]`);
    if (label) label.textContent = text;
  });
  
  // Update save buttons
  const saveButtons = document.querySelectorAll('.save-btn');
  saveButtons.forEach(button => {
    button.textContent = t.saveChanges;
  });
}

// Emergency contacts data
let emergencyContacts = [];

// Save contacts to localStorage
function saveContacts() {
  localStorage.setItem('emergencyContacts', JSON.stringify(emergencyContacts));
}

// Load and display emergency contacts
function loadEmergencyContacts() {
  const contactsList = document.getElementById('emergencyContactsList');
  contactsList.innerHTML = '';

  const currentLang = document.getElementById("languageSelect").value;
  const t = translations[currentLang] || translations["en"];

  if (emergencyContacts.length === 0) {
    contactsList.innerHTML = `<p style="text-align: center; color: #666; padding: 20px;">${t.noContacts}</p>`;
    return;
  }

  emergencyContacts.forEach((contact, index) => {
    const contactItem = document.createElement('div');
    contactItem.className = 'contact-item';
    contactItem.innerHTML = `
      <div class="contact-left">
        <div class="contact-icon">${contact.name.charAt(0)}</div>
        <div class="contact-info">
          <div class="contact-name">${contact.name}</div>
          <div class="contact-relationship">${contact.relationship}</div>
          <div class="contact-phone">${contact.phone}</div>
        </div>
      </div>
      <div class="contact-actions">
        <button class="contact-btn remove-contact-btn" onclick="removeContact(${index})">‚úï ${t.remove}</button>
      </div>
    `;
    contactsList.appendChild(contactItem);
  });
}

// Remove a contact
function removeContact(index) {
  const currentLang = document.getElementById("languageSelect").value;
  const t = translations[currentLang] || translations["en"];
  
  const contact = emergencyContacts[index];
  if (confirm(t.removeContactConfirm.replace('{name}', contact.name))) {
    emergencyContacts.splice(index, 1);
    saveContacts();
    loadEmergencyContacts();
    alert(t.contactRemoved.replace('{name}', contact.name));
  }
}

// Add new contact
function addContact(name, relationship, phone) {
  const currentLang = document.getElementById("languageSelect").value;
  const t = translations[currentLang] || translations["en"];
  
  const newContact = { name, relationship, phone };
  emergencyContacts.push(newContact);
  saveContacts();
  loadEmergencyContacts();
  alert(t.contactAdded.replace('{name}', name));
}

window.addEventListener("DOMContentLoaded", () => {
  const defaultLang = document.getElementById("languageSelect").value;
  applyTranslation(defaultLang);
  loadEmergencyContacts();

  // Header functionality
  function updateHeader() {
    const currentLang = document.getElementById("languageSelect").value;
    const t = translations[currentLang] || translations["en"];
    const greeting = getGreeting(currentLang);
    const userName = document.getElementById('profileFullName').textContent;
    document.getElementById("headerGreeting").textContent = t.welcome.replace('{name}', userName);

    const now = new Date();
    document.getElementById("headerTime").textContent = now.toLocaleString();

    const quotes = [
      "Your health is your wealth üíô",
      "Every dose is a step toward strength.",
      "You're doing great ‚Äî keep going!",
      "Small steps, big impact. Take your meds!",
      "The body knows how to heal ‚Äî we just need to listen.",
      "A healthy dose of gratitude is good medicine.",
      "Medicine is not magic. It's science and care.",
      "The best medicine is prevention.",
      "Healing is a team effort.",
      "Medication is a bridge ‚Äî not the destination.",
      "The best medicine is a life well-lived.",
      "Doctors treat. Healers transform.",
      "The medicine you need may not come in a bottle.",
      "Doctors diagnose. Patients decide.",
      "Medicine is a journey, not a destination.",
      "Healing begins with trust.",
      "A kind word is sometimes better than a prescription.",
      "The best medicine is a good night's sleep.",
      "Medicine is a science of hope.",
      "The most powerful medicine is love.",
      "Healing is remembering you are whole.",
      "Medicine is a tool. Healing is a process."
    ];
    const quote = quotes[Math.floor(Math.random() * quotes.length)];
    document.getElementById("dailyQuote").textContent = quote;
  }

  setInterval(updateHeader, 1800000);
  updateHeader();

  // Modal functionality
  const editProfileBtn = document.getElementById('editProfileBtn');
  const editProfileModal = document.getElementById('editProfileModal');
  const closeModalBtn = document.getElementById('closeModalBtn');
  const editProfileForm = document.getElementById('editProfileForm');
  
  const addContactBtn = document.getElementById('addContactBtn');
  const addContactModal = document.getElementById('addContactModal');
  const closeContactModalBtn = document.getElementById('closeContactModalBtn');
  const addContactForm = document.getElementById('addContactForm');
  
  // Open edit profile modal
  if (editProfileBtn) {
    editProfileBtn.addEventListener('click', function() {
      // Populate form with current values
      document.getElementById('editFullName').value = document.getElementById('profileFullName').textContent;
      document.getElementById('editDOB').value = document.getElementById('profileDOB').textContent;
      document.getElementById('editGender').value = document.getElementById('profileGender').textContent;
      document.getElementById('editPhone').value = document.getElementById('profilePhone').textContent;
      document.getElementById('editEmail').value = document.getElementById('profileEmail').textContent;
      document.getElementById('editDoctor').value = document.getElementById('profileDoctor').textContent;
      document.getElementById('editDoctorPhone').value = document.getElementById('profileDoctorPhone').textContent;
      document.getElementById('editPharmacy').value = document.getElementById('profilePharmacy').textContent;
      document.getElementById('editAllergies').value = document.getElementById('profileAllergies').textContent;
      document.getElementById('editBloodType').value = document.getElementById('profileBloodType').textContent;
      
      editProfileModal.style.display = 'flex';
    });
  }
  
  // Open add contact modal
  if (addContactBtn) {
    addContactBtn.addEventListener('click', function() {
      addContactModal.style.display = 'flex';
    });
  }
  
  // Close modals
  if (closeModalBtn) {
    closeModalBtn.addEventListener('click', function() {
      editProfileModal.style.display = 'none';
    });
  }
  
  if (closeContactModalBtn) {
    closeContactModalBtn.addEventListener('click', function() {
      addContactModal.style.display = 'none';
    });
  }
  
  // Close modals when clicking outside
  window.addEventListener('click', function(event) {
    if (event.target === editProfileModal) {
      editProfileModal.style.display = 'none';
    }
    if (event.target === addContactModal) {
      addContactModal.style.display = 'none';
    }
  });
  
  // Handle edit profile form submission
  if (editProfileForm) {
    editProfileForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const currentLang = document.getElementById("languageSelect").value;
      const t = translations[currentLang] || translations["en"];
      
      // Update profile with new values
      document.getElementById('profileFullName').textContent = document.getElementById('editFullName').value;
      document.getElementById('profileDOB').textContent = document.getElementById('editDOB').value;
      document.getElementById('profileGender').textContent = document.getElementById('editGender').value;
      document.getElementById('profilePhone').textContent = document.getElementById('editPhone').value;
      document.getElementById('profileEmail').textContent = document.getElementById('editEmail').value;
      document.getElementById('profileDoctor').textContent = document.getElementById('editDoctor').value;
      document.getElementById('profileDoctorPhone').textContent = document.getElementById('editDoctorPhone').value;
      document.getElementById('profilePharmacy').textContent = document.getElementById('editPharmacy').value;
      document.getElementById('profileAllergies').textContent = document.getElementById('editAllergies').value;
      document.getElementById('profileBloodType').textContent = document.getElementById('editBloodType').value;
      
      // Update header greeting if name changed
      const newName = document.getElementById('editFullName').value;
      const greeting = getGreeting(currentLang);
      document.getElementById('headerGreeting').textContent = t.welcome.replace('{name}', newName);
      
      // Close modal
      editProfileModal.style.display = 'none';
      
      // Show success message
      alert(t.profileUpdated);
    });
  }
  
  // Handle add contact form submission
  if (addContactForm) {
    addContactForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const name = document.getElementById('contactName').value;
      const relationship = document.getElementById('contactRelationship').value;
      const phone = document.getElementById('contactPhone').value;
      
      addContact(name, relationship, phone);
      
      // Reset form and close modal
      addContactForm.reset();
      addContactModal.style.display = 'none';
    });
  }
  
  // Logout functionality
  const logoutBtn = document.getElementById('logoutBtn');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', function() {
      const currentLang = document.getElementById("languageSelect").value;
      const t = translations[currentLang] || translations["en"];
      
      if (confirm(t.logoutConfirm)) {
        alert(t.loggedOut);
        // In a real app, you would redirect to login page:
        // window.location.href = 'login.html';
      }
    });
  }
});

// Language selector event listener
document.getElementById("languageSelect").addEventListener("change", (e) => {
  applyTranslation(e.target.value);
  loadEmergencyContacts(); // Reload contacts with new language
});
  </script>
</body>
</html>



