<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Settings ‚Äì MedMinder</title>
  <link rel="stylesheet" href="simpmedcheck.css">
  <style>
    /* Settings-specific styles */
    body {
      font-family: 'Arial', sans-serif;
      font-size: 18px;
      line-height: 1.6;
      color: #333;
      background-color: #f5f7fa;
      margin: 0 auto;
      padding: 20px;
    }

    h2 {
      color: #2c5530;
      font-size: 2.2em;
      margin-bottom: 25px;
      text-align: center;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    }

    h3 {
      color: #2c5530;
      font-size: 1.8em;
      margin-bottom: 25px;
      border-bottom: 3px solid #4CAF50;
      padding-bottom: 12px;
    }

    label {
      display: block;
      margin: 15px 0 8px;
      font-weight: bold;
      color: #2c5530;
      font-size: 1.1em;
    }

    input[type="text"],
    input[type="tel"],
    input[type="time"] {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 10px;
      box-sizing: border-box;
      font-size: 18px;
      transition: all 0.3s ease;
    }

    input[type="text"]:focus,
    input[type="tel"]:focus,
    input[type="time"]:focus {
      border-color: #4CAF50;
      outline: none;
      box-shadow: 0 0 10px rgba(76, 175, 80, 0.2);
      transform: translateY(-2px);
    }

    input[type="checkbox"] {
      width: 20px;
      height: 20px;
      margin-right: 10px;
    }

    button {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      color: white;
      border: none;
      border-radius: 10px;
      padding: 15px 25px;
      cursor: pointer;
      font-weight: bold;
      font-size: 20px;
      transition: all 0.3s ease;
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
      background: linear-gradient(135deg, #45a049, #3d8b40);
    }

    #resumeTalkingBtn {
      border-radius: 30px;
      height: 60px;
      width: 200px;
      margin: 20px auto;
      background: linear-gradient(135deg, #28a745, #218838);
    }

    #resumeTalkingBtn:hover {
      background: linear-gradient(135deg, #218838, #1e7e34);
    }

    .home-button {
      display: block;
      width: 200px;
      margin: 30px auto;
      background: linear-gradient(135deg, #6c757d, #5a6268);
      text-align: center;
    }

    .home-button:hover {
      background: linear-gradient(135deg, #5a6268, #495057);
    }

    .instruction-text {
      font-size: 16px;
      color: #666;
      margin-top: 5px;
      font-style: italic;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-title span {
      font-size: 24px;
    }

    /* Fix for language selector alignment */
    .utility-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 25px;
      justify-content: center;
      align-items: center;
      padding: 15px;
      background: linear-gradient(90deg, #4474dd 0%, #4adef1 100%);
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .utility-bar button, 
    .utility-bar select,
    .utility-bar a button {
      font-size: 16px;
      padding: 12px 18px;
      border: 2px solid #4CAF50;
      background: white;
      color: #2c5530;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      border-bottom: none;
      height: 50px;
      min-width: 120px;
    }

    .utility-bar button:hover,
    .utility-bar a button:hover {
      background: #4CAF50;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
    }

    .utility-bar select {
      background: white;
      color: #333;
      border: 2px solid #4CAF50;
      padding: 11px 15px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s ease;
      height: 50px;
      min-width: 120px;
    }

    .utility-bar select:hover {
      border-color: #45a049;
      box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
      transform: translateY(-2px);
    }

    .utility-bar select option {
      background: white;
      color: #333;
      padding: 10px;
      font-size: 16px;
    }

    /* Speaking indicator */
    .speaking {
      background-color: #e8f5e8 !important;
      border-color: #4CAF50 !important;
    }
  </style>
</head>
<body>
  <header>
    <nav class="utility-bar">
      <a href="index.html" style="text-decoration: none;"><button>üè† Home</button></a>
      <a href="schedule.html" style="text-decoration: none;"><button>üìÖ Schedule</button></a>
      <a href="settings.html" style="text-decoration: none;"><button>‚öôÔ∏è Settings</button></a>
      <a href="howtouse.html" style="text-decoration: none;"><button>‚ùì How to Use</button></a>
      <a href="added-medications.html" style="text-decoration: none;"><button>üíä Added Medications</button></a>
      <a href="profile.html" style="text-decoration: none;"><button>üë§ Profile</button></a>

      <select class="lS" id="languageSelect">
        <option value="en">English</option>
        <option value="ig">Igbo</option>
        <option value="yo">Yoruba</option>
        <option value="ha">Hausa</option>
      </select>
    </nav>
  </header>
  
  <h2>‚öôÔ∏è Settings</h2>

  <section id="voiceSettings">
    <h3 class="section-title"><span>üîä</span> Voice Settings</h3>
    <div class="form-group">
      <label for="voiceToggle">Enable Voice Narration:</label>
      <input type="checkbox" id="voiceToggle" checked />
      <div class="instruction-text">Turn on or off the voice that reads the screen</div>
    </div>
    
    <div class="form-group">
      <label for="stopTalkingToggle">Stop Talking:</label>
      <input type="checkbox" id="stopTalkingToggle" />
      <div class="instruction-text">Temporarily pause the voice without turning it off completely</div>
    </div>
    
<button style="font-size: 20px; width: 210px; " id="resumeTalkingBtn">Resume Talking</button>
  </section>

   <footer>
    <p><span data-translate="copyright">MedMinder ¬© 2025</span></p>
    <p><span data-translate="designedFor">Designed with care for older adults</span> | <a href="#" data-translate="privacyPolicy">Privacy Policy</a></p>
  </footer>

  <script>
    // Speech synthesis functionality
    let speechEnabled = true;
    let speechPaused = false;
    let speechUtterance = null;
    
    // DOM elements
    const voiceToggle = document.getElementById('voiceToggle');
    const stopTalkingToggle = document.getElementById('stopTalkingToggle');
    const resumeTalkingBtn = document.getElementById('resumeTalkingBtn');
    
    // Function to read the entire page content
    function readPageContent() {
      if (!speechEnabled || speechPaused) return;
      
      let fullText = "Settings Page. ";
      
      // Read main heading
      const mainHeading = document.querySelector('h2');
      if (mainHeading) {
        fullText += "Main heading: " + mainHeading.textContent + ". ";
      }
      
      // Read voice settings section
      const voiceSection = document.getElementById('voiceSettings');
      if (voiceSection) {
        const voiceTitle = voiceSection.querySelector('h3');
        if (voiceTitle) {
          fullText += "Section: " + voiceTitle.textContent.replace('üîä', 'Voice Settings') + ". ";
        }
        
        // Read voice toggle
        const voiceLabel = voiceSection.querySelector('label[for="voiceToggle"]');
        if (voiceLabel) {
          fullText += "Option: " + voiceLabel.textContent + ". ";
          fullText += "This option is currently " + (voiceToggle.checked ? "enabled" : "disabled") + ". ";
        }
        
        // Read stop talking toggle
        const stopTalkingLabel = voiceSection.querySelector('label[for="stopTalkingToggle"]');
        if (stopTalkingLabel) {
          fullText += "Option: " + stopTalkingLabel.textContent + ". ";
          fullText += "This option is currently " + (stopTalkingToggle.checked ? "enabled" : "disabled") + ". ";
        }
        
        // Read resume button
        fullText += "Button available: " + resumeTalkingBtn.textContent + ". ";
      }
      
      // Read quiet hours section
      const quietSection = document.getElementById('quietHours');
      if (quietSection) {
        const quietTitle = quietSection.querySelector('h3');
        if (quietTitle) {
          fullText += "Section: " + quietTitle.textContent.replace('üåô', 'Quiet Hours') + ". ";
        }
        
        // Read quiet hours start
        const startLabel = quietSection.querySelector('label[for="quietStart"]');
        const startTime = document.getElementById('quietStart');
        if (startLabel && startTime) {
          fullText += "Setting: " + startLabel.textContent + ". ";
          fullText += "Current value: " + (startTime.value || "not set") + ". ";
        }
        
        // Read quiet hours end
        const endLabel = quietSection.querySelector('label[for="quietEnd"]');
        const endTime = document.getElementById('quietEnd');
        if (endLabel && endTime) {
          fullText += "Setting: " + endLabel.textContent + ". ";
          fullText += "Current value: " + (endTime.value || "not set") + ". ";
        }
      }
      
      // Read footer
      const footer = document.querySelector('footer');
      if (footer) {
        const footerText = footer.textContent.replace(/\s+/g, ' ').trim();
        fullText += "Footer: " + footerText + ". ";
      }
      
      // Instructions for using the page
      fullText += "To change any setting, simply click on the option you want to modify. ";
      fullText += "Use the checkboxes to enable or disable features. ";
      fullText += "Use the time inputs to set specific times for quiet hours. ";
      fullText += "The resume talking button will restart voice narration if it was paused. ";
      
      speakText(fullText);
    }
    
    // Function to read specific element when focused
    function readElementOnFocus(element, additionalText = '') {
      if (!speechEnabled || speechPaused) return;
      
      let text = '';
      
      // Find the associated label
      const id = element.id;
      const label = document.querySelector(`label[for="${id}"]`);
      
      if (label) {
        text = label.textContent + '. ';
      }
      
      if (additionalText) {
        text += additionalText + '. ';
      }
      
      if (element.type === 'checkbox') {
        text += 'This option is currently ' + (element.checked ? 'enabled' : 'disabled') + '.';
      } else if (element.type === 'time' && element.value) {
        text += 'Current value is ' + element.value + '.';
      }
      
      if (text) {
        speakText(text);
      }
    }
    
    // Speech synthesis function
    function speakText(text) {
      if (!speechEnabled || speechPaused) return;
      
      // Cancel any ongoing speech
      if (speechUtterance) {
        window.speechSynthesis.cancel();
      }
      
      // Create new speech utterance
      speechUtterance = new SpeechSynthesisUtterance(text);
      speechUtterance.rate = 0.8;
      speechUtterance.pitch = 1;
      speechUtterance.volume = 1;
      
      // Add visual feedback while speaking
      speechUtterance.onstart = function() {
        document.body.classList.add('speaking');
      };
      
      speechUtterance.onend = function() {
        document.body.classList.remove('speaking');
      };
      
      speechUtterance.onerror = function() {
        document.body.classList.remove('speaking');
      };
      
      // Speak the text
      window.speechSynthesis.speak(speechUtterance);
    }
    
    // Initialize settings from localStorage
    function initializeSettings() {
      // Voice settings
      const savedVoiceSetting = localStorage.getItem('voiceEnabled');
      if (savedVoiceSetting !== null) {
        speechEnabled = savedVoiceSetting === 'true';
        voiceToggle.checked = speechEnabled;
      }
      
      // Quiet hours
      const savedQuietStart = localStorage.getItem('quietStart');
      const savedQuietEnd = localStorage.getItem('quietEnd');
      if (savedQuietStart) document.getElementById('quietStart').value = savedQuietStart;
      if (savedQuietEnd) document.getElementById('quietEnd').value = savedQuietEnd;
      
      // Read page content when loaded
      setTimeout(() => {
        if (speechEnabled) {
          readPageContent();
        }
      }, 1000);
    }
    
    // Event listeners for voice controls
    voiceToggle.addEventListener('change', function() {
      speechEnabled = this.checked;
      localStorage.setItem('voiceEnabled', speechEnabled);
      
      if (speechEnabled) {
        readElementOnFocus(this, "Voice narration has been enabled");
      } else {
        window.speechSynthesis.cancel();
        readElementOnFocus(this, "Voice narration has been disabled");
      }
    });
    
    stopTalkingToggle.addEventListener('change', function() {
      speechPaused = this.checked;
      
      if (speechPaused) {
        window.speechSynthesis.cancel();
        readElementOnFocus(this, "Voice narration has been paused");
      } else {
        readElementOnFocus(this, "Voice narration has been resumed");
      }
    });
    
    resumeTalkingBtn.addEventListener('click', function() {
      speechPaused = false;
      stopTalkingToggle.checked = false;
      readPageContent();
    });
    
    // Add focus event listeners to form elements
    const formElements = document.querySelectorAll('input, button, select');
    formElements.forEach(element => {
      element.addEventListener('focus', function() {
        if (element.type === 'checkbox') {
          readElementOnFocus(element);
        } else if (element.type === 'time') {
          readElementOnFocus(element);
        } else if (element.tagName === 'BUTTON') {
          if (speechEnabled && !speechPaused) {
            speakText("Button: " + element.textContent);
          }
        }
      });
    });
    
    // Save quiet hours and provide feedback
    document.getElementById('quietStart').addEventListener('change', function() {
      localStorage.setItem('quietStart', this.value);
      readElementOnFocus(this, "Start time has been updated to " + this.value);
    });
    
    document.getElementById('quietEnd').addEventListener('change', function() {
      localStorage.setItem('quietEnd', this.value);
      readElementOnFocus(this, "End time has been updated to " + this.value);
    });
    
    // Read section titles when they come into view
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && speechEnabled && !speechPaused) {
          const section = entry.target;
          const title = section.querySelector('h3');
          if (title) {
            // Small delay to avoid interrupting current speech
            setTimeout(() => {
              speakText("Now viewing: " + title.textContent);
            }, 500);
          }
        }
      });
    }, { threshold: 0.5 });
    
    // Observe sections
    const sections = document.querySelectorAll('section');
    sections.forEach(section => {
      observer.observe(section);
    });
    
    // Initialize settings when page loads
    document.addEventListener('DOMContentLoaded', initializeSettings);
  </script>
</body>
</html>



